<app-header></app-header>

<div class="profile-form">
  <h1>Profil utilisateur</h1>

  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <input
      type="text"
      placeholder="Username"
      formControlName="username"
    />

    <input
      type="email"
      placeholder="email@email.fr"
      formControlName="email"
    />

    <input
      type="password"
      placeholder="Mot de passe"
      formControlName="password"
    />
    <div *ngIf="password?.errors as errors">
    <div *ngIf="errors['minLength']">Au moins 8 caractères requis.</div>
    <div *ngIf="errors['lowercase']">Une minuscule est requise.</div>
    <div *ngIf="errors['uppercase']">Une majuscule est requise.</div>
    <div *ngIf="errors['digit']">Un chiffre est requis.</div>
    <div *ngIf="errors['special']">Un caractère spécial est requis.</div>
    </div>
    <button
      type="submit"
      [disabled]="!profileForm.valid || !atLeastOneFieldFilled"
    >
      Sauvegarder
    </button>
  </form>
</div>

<div class="Abonnements">
    <hr class="separateur"/>
    <h1>Abonnements</h1>
    <div class="themes">
    <div class="card" *ngFor="let theme of subscribedThemes">
        <h2>{{ theme.name }}</h2>
        <p class="content">{{ theme.description }}</p>

        <div class="button-container">
        <button 
            class="unsubscribe" 
            (click)="unsubscribe(theme)">
            Se désabonner
        </button>
        </div>
    </div>
    </div>
</div>